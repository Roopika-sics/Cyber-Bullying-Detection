{% extends 'base.html' %}

{% block content %}
<div>
    <h2>Abusive Comments</h2>
    <table border="1">
        <tr>
            <th>User</th>
            <th>Comment</th>
            <th>Post</th>
            <th>Date</th>
        </tr>
        {% for comment in flagged_comments %}
        <tr>
            <td>{{ comment.user.username }}</td>
            <td>{{ comment.text }}</td>
            <td>{{ comment.post.content|truncatechars:50 }}</td>
            <td>{{ comment.created_at }}</td>
            <td>
                <form action="{% url 'delete_comment' comment.id %}" method="POST">
                    {% csrf_token %}
                    <button type="submit" class="bg-red-600 text-white px-2 py-1 rounded">Delete</button>
                </form>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="4">No abusive comments found.</td>
        </tr>
        {% endfor %}
    </table>

    <h3>Reported by Users</h3>
    <table border="1">
        <tr>
            <th>User</th>
            <th>Comment</th>
            <th>Post</th>
            <th>Date</th>
            <th>Action</th>
        </tr>
        {% for comment in reported_comments %}
        <tr>
            <td>{{ comment.user.username }}</td>
            <td>{{ comment.text }}</td>
            <td>{{ comment.post.content|truncatechars:50 }}</td>
            <td>{{ comment.created_at }}</td>
            <td>
                <form action="{% url 'delete_comment' comment.id %}" method="POST">
                    {% csrf_token %}
                    <button type="submit" class="bg-red-600 text-white px-2 py-1 rounded">Delete</button>
                </form>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5">No reported comments.</td>
        </tr>
        {% endfor %}
    </table>
</div>
{% endblock %}
